        
        <%= javascript_include_tag 'jquery'%>
        <%= render "sections"%>
        <div class="container" style="margin-top:20px;">
            <div class="row-fluid">
                <div class="span9 leftBox" style="height:auto;background-color:#ffffff">
                    <div class="question">
                        <h1>                            
                            <%= @question.name%>
                        </h1>
                        <h2>
                            Q<%= @question.id %> 
                            <%#= @question.point for setting the point for each question %>                           
                        </h2>
                    </div>
                    <%= form_for(:response, :url=>reponses_update_url) do |f|%>  
                    <%= render "questions_set", :f => f%>
                    <%end%>
                    <%= render "question_details"%>
                </div>
            </div>
        </div> 



          <script>
        $(document).ready(function(){ 
            // alert('in previous');
             //to set the value in slider
              var response_answer1 = $('#response_answer_1').val(); 
               
               //to set the options selected
               var response_answer2 = $('#response_answer_2').val();
                $('#option').find('a#'+response_answer2+'').removeClass('btn form priorityTip');
                $('#option').find('a#'+response_answer2+'').addClass('btn form btn-success priorityTip');

               //hide priority option on load
               if(response_answer2 == "add_to_plan"){
                  var response_answer3 = $('#response_answer_3').val();
                  $('#priority_option').find('a#'+response_answer3+'').removeClass('btn form priorityTip');
                $('#priority_option').find('a#'+response_answer3+'').addClass('btn form btn-success priorityTip');
                $('#priority_option').show();

               }
               else{
                $('#priority_option').hide();
               }
                 
                //highlight the section currently on
                var section_id_val = $('#section').val();
                $('#section_'+section_id_val).removeClass($('#section_'+section_id_val).attr('class'));
                $('#section_'+section_id_val).addClass('dropdown on');
                $('#span_'+section_id_val).removeClass($('#span_'+section_id_val).attr('class'));
                $('#span_'+section_id_val).addClass('red');

                if(section_id_val == "1"){
                 $('#section_2').removeClass($('#section_2').attr('class'));
                 $('#section_2').addClass('next'); 
                 $('#section_3').removeClass($('#section_2').attr('class'));
                 $('#section_3').addClass('next');
                 $('#span_2').hide();
                 $('#span_3').hide();
                }

                 if(section_id_val == "2"){
                 $('#section_1').removeClass($('#section_2').attr('class'));
                 $('#section_1').addClass('done'); 
                 $('#section_3').removeClass($('#section_2').attr('class'));
                 $('#section_3').addClass('next');  
                 $('#span_1').removeClass($('#span_'+section_id_val).attr('class'));
                 $('#span_1').addClass('green');
                 $('#span_3').hide();                
                }

               if(section_id_val == "3"){                
                 $('#section_1').removeClass($('#section_1').attr('class'));
                 $('#section_1').addClass('done'); 
                 $('#section_2').removeClass($('#section_2').attr('class'));
                 $('#section_2').addClass('done');
                 $('#span_1').removeClass($('#span_'+section_id_val).attr('class'));
                 $('#span_2').removeClass($('#span_'+section_id_val).attr('class'));
                 $('#span_1').addClass('green');
                 $('#span_2').addClass('green');
                 $('#span_3').show();                     
                }
  

                //For the Add to Plan options
                $('#option').click(function(e){
                    //set the add to plan options 
                    $('#response_answer_2').val(e.target.id); 
                    //make option as grey
                    $('#option').find('a#in_our_plan').removeClass($('#option').find('a#in_our_plan').
                        attr('class'));
                    $('#option').find('a#add_to_plan').removeClass($('#option').find('a#add_to_plan').
                        attr('class'));
                    $('#option').find('a#not_applicable').removeClass($('#option').find('a#not_applicable').attr('class'));                    
                    
                    $('#option').find('a#in_our_plan').addClass('btn form priorityTip');
                    $('#option').find('a#add_to_plan').addClass('btn form priorityTip');
                    $('#option').find('a#not_applicable').addClass('btn form priorityTip');
                    
                    //make the selected to green
                    $('#option').find('a#'+e.target.id+'').removeClass('btn form priorityTip');
                    $('#option').find('a#'+e.target.id+'').addClass('btn form btn-success priorityTip');
                    //if Add to Plan is clicked the show the priority tab
                    if(e.target.id == "add_to_plan"){
                      $('#priority_option').show();                      
                    }
                    else{
                      $('#priority_option').hide();  
                    }
                });

                //For the Priority options
                $('#priority_option').click(function(e){
                    $('#response_answer_3').val(e.target.id);                     
                   
                    //make all option as grey
                    $('#priority_option').find('a#must_do').removeClass($('#option').find('a#must_do').
                        attr('class'));
                    $('#priority_option').find('a#should_do').removeClass($('#option').find('a#should_do').
                        attr('class'));
                    $('#priority_option').find('a#could_do').removeClass($('#option').find('a#could_do').attr('class'));
                    
                    $('#priority_option').find('a#must_do').addClass('btn form priorityTip');
                    $('#priority_option').find('a#should_do').addClass('btn form priorityTip');
                    $('#priority_option').find('a#could_do').addClass('btn form priorityTip');

                    //make selected option as green                    
                    $('#priority_option').find('a#'+e.target.id+'').removeClass('btn form priorityTip');
                    $('#priority_option').find('a#'+e.target.id+'').addClass('btn form btn-success priorityTip');
                });
               
                 //post form
                $('#confirm_answer').click(function(e){                   
                    $('form').submit();
                    return false;
                });

               /* $(".priorityTip").tooltip({
                    placement: 'bottom' 
                });*/ 
                
                
                
                $( "#slider" ).slider({
                    value:response_answer1,
                    min: 1,
                    max: 5,
                    step: 1,
                    slide: function( event, ui ) {
                        switch(ui.value){
                            case 1 :  $("a.ui-slider-handle").attr('data-original-title', 'Please Fill Text 0'); break;
                            case 2 :  $("a.ui-slider-handle").attr('data-original-title', 'Please Fill Text 25'); break;
                            case 3 :  $("a.ui-slider-handle").attr('data-original-title', 'Please Fill Text 50'); break;
                            case 4 :  $("a.ui-slider-handle").attr('data-original-title', 'Please Fill Text 75'); break;
                            case 5 :  $("a.ui-slider-handle").attr('data-original-title', 'Please Fill Text 100'); break;
                        }
  

                    }
                });

                $("#slider").slider({
                   change: function(event, ui) {
                    $( "#response_answer_1" ).val( $( "#slider" ).slider( "value" ));
                }
                });
                


                $("div#slider a.ui-slider-handle").tooltip({
                    placement: 'bottom' 
                });
                $("a.ui-slider-handle").attr('data-original-title', 'Please Fill Text 0');
                
            });
         </script>